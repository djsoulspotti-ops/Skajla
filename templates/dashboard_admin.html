<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Amministratore - SKAJLA</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="/static/css/tokens.css" rel="stylesheet">
    <link href="/static/css/dashboard-premium.css" rel="stylesheet">
    <style>
        /* Principal-Specific Styles */
        .analytics-hero {
            background: linear-gradient(135deg, var(--color-blue-900) 0%, var(--color-blue-700) 100%);
            color: white;
            padding: 2.5rem;
            border-radius: var(--radius-xl);
            border: none;
            margin-bottom: 2rem;
        }

        .analytics-hero h2 {
            font-size: var(--text-3xl);
            font-weight: var(--font-bold);
            margin-bottom: 2rem;
            color: white;
        }

        .hero-metrics {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
        }

        .hero-metric {
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .hero-metric-value {
            font-size: var(--text-4xl);
            font-weight: var(--font-extrabold);
            color: white;
            margin-bottom: 0.5rem;
        }

        .hero-metric-label {
            font-size: var(--text-sm);
            color: rgba(255, 255, 255, 0.85);
            font-weight: var(--font-medium);
        }

        .hero-metric-change {
            font-size: var(--text-xs);
            color: rgba(255, 255, 255, 0.7);
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .admin-action-card {
            background: white;
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-lg);
            padding: 1.25rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .admin-action-card:hover {
            border-color: var(--color-blue-600);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }

        .action-icon-wrapper {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--color-blue-900) 0%, var(--color-blue-700) 100%);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .action-content h3 {
            font-size: var(--text-base);
            font-weight: var(--font-semibold);
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .action-content p {
            font-size: var(--text-xs);
            color: var(--text-muted);
        }

        .alert-item {
            display: flex;
            align-items: start;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-surface);
            border-radius: var(--radius-lg);
            margin-bottom: 0.75rem;
            border-left: 3px solid var(--color-ruby-500);
        }

        .alert-icon {
            width: 40px;
            height: 40px;
            background: rgba(239, 68, 68, 0.1);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-ruby-600);
            flex-shrink: 0;
        }

        .alert-content h4 {
            font-size: var(--text-sm);
            font-weight: var(--font-semibold);
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .alert-content p {
            font-size: var(--text-xs);
            color: var(--text-secondary);
        }

        .activity-feed-item {
            display: flex;
            align-items: start;
            gap: 1rem;
            padding-bottom: 1rem;
            margin-bottom: 1rem;
            border-bottom: 1px solid var(--border-secondary);
        }

        .activity-feed-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .activity-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--color-blue-600) 0%, var(--color-blue-400) 100%);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: var(--font-bold);
            font-size: var(--text-xs);
            flex-shrink: 0;
        }

        .activity-content p {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .activity-time {
            font-size: var(--text-xs);
            color: var(--text-muted);
        }

        @media (max-width: 1200px) {
            .hero-metrics {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .hero-metrics {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="dashboard-page">
    <div class="dashboard-container" id="dashboardContainer">
        <!-- Modern Collapsible Sidebar -->
        <aside class="dashboard-sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-brand">SKAJLA</div>
                <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-label">Menu</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="/admin/dashboard" class="nav-link active">
                                <span class="nav-icon"><i class="fas fa-tachometer-alt"></i></span>
                                <span class="nav-text">Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/admin/scuole" class="nav-link">
                                <span class="nav-icon"><i class="fas fa-school"></i></span>
                                <span class="nav-text">Scuole</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/admin/users" class="nav-link">
                                <span class="nav-icon"><i class="fas fa-users"></i></span>
                                <span class="nav-text">Utenti</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/admin/codici" class="nav-link">
                                <span class="nav-icon"><i class="fas fa-key"></i></span>
                                <span class="nav-text">Codici Accesso</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-label">Strumenti</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="/admin/reports" class="nav-link">
                                <span class="nav-icon"><i class="fas fa-file-alt"></i></span>
                                <span class="nav-text">Report</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/admin/settings" class="nav-link">
                                <span class="nav-icon"><i class="fas fa-cog"></i></span>
                                <span class="nav-text">Impostazioni</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="user-profile-card">
                    <div class="user-avatar" style="background: linear-gradient(135deg, var(--color-purple-700) 0%, var(--color-purple-500) 100%);">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="user-details">
                        <div class="user-name">Amministratore</div>
                        <div class="user-role">Sistema</div>
                    </div>
                </div>
                <a href="/logout" class="btn-logout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Esci</span>
                </a>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="dashboard-main">
            <!-- Header -->
            <div class="dashboard-header">
                <div class="header-left">
                    <h1 class="page-title">Pannello Amministratore ⚙️</h1>
                    <p class="page-subtitle">Panoramica completa della piattaforma SKAJLA</p>
                </div>
                <div class="header-right">
                    <div class="search-bar">
                        <i class="fas fa-search" style="color: var(--text-muted);"></i>
                        <input type="text" placeholder="Cerca scuole, utenti..." />
                    </div>
                    <button class="notifications-btn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">8</span>
                    </button>
                </div>
            </div>

            <!-- Analytics Hero: Full-Width Multi-Metric -->
            <div class="analytics-hero">
                <h2><i class="fas fa-chart-line"></i> Statistiche Piattaforma</h2>
                <div class="hero-metrics">
                    <div class="hero-metric">
                        <div class="hero-metric-value">1,247</div>
                        <div class="hero-metric-label">Utenti Attivi</div>
                        <div class="hero-metric-change">
                            <i class="fas fa-arrow-up"></i> +8.2% questa settimana
                        </div>
                    </div>
                    <div class="hero-metric">
                        <div class="hero-metric-value">28</div>
                        <div class="hero-metric-label">Scuole Registrate</div>
                        <div class="hero-metric-change">
                            <i class="fas fa-arrow-up"></i> +3 questo mese
                        </div>
                    </div>
                    <div class="hero-metric">
                        <div class="hero-metric-value">94.2%</div>
                        <div class="hero-metric-label">Uptime Server</div>
                        <div class="hero-metric-change">
                            <i class="fas fa-check-circle"></i> Stabile
                        </div>
                    </div>
                    <div class="hero-metric">
                        <div class="hero-metric-value">15.8K</div>
                        <div class="hero-metric-label">Sessioni Oggi</div>
                        <div class="hero-metric-change">
                            <i class="fas fa-arrow-up"></i> +12% vs ieri
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Bento Grid: Quick Actions -->
            <h3 style="font-size: var(--text-xl); font-weight: var(--font-semibold); color: var(--text-primary); margin-bottom: 1.5rem;">
                Azioni Rapide
            </h3>
            <div class="bento-grid quad-layout">
                <a href="/admin/codici/genera" class="admin-action-card">
                    <div class="action-icon-wrapper">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <div class="action-content">
                        <h3>Genera Codici</h3>
                        <p>Crea nuovi codici di accesso</p>
                    </div>
                </a>

                <a href="/admin/scuole/nuova" class="admin-action-card">
                    <div class="action-icon-wrapper">
                        <i class="fas fa-school"></i>
                    </div>
                    <div class="action-content">
                        <h3>Nuova Scuola</h3>
                        <p>Registra una nuova scuola</p>
                    </div>
                </a>

                <a href="/admin/reports" class="admin-action-card">
                    <div class="action-icon-wrapper">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="action-content">
                        <h3>Report Completi</h3>
                        <p>Genera analytics e report</p>
                    </div>
                </a>

                <a href="/admin/settings" class="admin-action-card">
                    <div class="action-icon-wrapper">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <div class="action-content">
                        <h3>Configurazione</h3>
                        <p>Impostazioni di sistema</p>
                    </div>
                </a>
            </div>

            <!-- Main Bento Grid: Performance, Alerts, Activity -->
            <div class="bento-grid balanced-layout" style="margin-top: 2rem;">
                <!-- School Performance -->
                <div class="bento-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-trophy"></i>
                            Top Scuole per Engagement
                        </h2>
                        <a href="/admin/scuole" class="card-action">Vedi tutte →</a>
                    </div>
                    <div>
                        <table class="grades-table">
                            <thead>
                                <tr>
                                    <th>Scuola</th>
                                    <th>Utenti</th>
                                    <th>Attività</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="font-weight: var(--font-medium);">Liceo Scientifico Da Vinci</td>
                                    <td>348</td>
                                    <td><span class="grade-badge excellent">95%</span></td>
                                </tr>
                                <tr>
                                    <td style="font-weight: var(--font-medium);">Istituto Tecnico Fermi</td>
                                    <td>412</td>
                                    <td><span class="grade-badge good">88%</span></td>
                                </tr>
                                <tr>
                                    <td style="font-weight: var(--font-medium);">Liceo Classico Manzoni</td>
                                    <td>287</td>
                                    <td><span class="grade-badge good">82%</span></td>
                                </tr>
                                <tr>
                                    <td style="font-weight: var(--font-medium);">Istituto Professionale Marconi</td>
                                    <td>156</td>
                                    <td><span class="grade-badge pass">76%</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- System Alerts -->
                <div class="bento-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-exclamation-triangle"></i>
                            Avvisi Sistema
                        </h2>
                        <a href="/admin/alerts" class="card-action">Gestisci →</a>
                    </div>
                    <div>
                        <div class="alert-item" style="border-left-color: var(--color-gold-500);">
                            <div class="alert-icon" style="background: rgba(245, 158, 11, 0.1); color: var(--color-gold-600);">
                                <i class="fas fa-database"></i>
                            </div>
                            <div class="alert-content">
                                <h4>Spazio Database: 78%</h4>
                                <p>Considera l'upgrade del piano storage</p>
                            </div>
                        </div>
                        <div class="alert-item">
                            <div class="alert-icon">
                                <i class="fas fa-exclamation-circle"></i>
                            </div>
                            <div class="alert-content">
                                <h4>3 Codici In Scadenza</h4>
                                <p>Scadranno tra 7 giorni</p>
                            </div>
                        </div>
                        <div class="alert-item" style="border-left-color: var(--color-emerald-500);">
                            <div class="alert-icon" style="background: rgba(16, 185, 129, 0.1); color: var(--color-emerald-600);">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="alert-content">
                                <h4>Backup Completato</h4>
                                <p>Ultimo backup: 2 ore fa</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="bento-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-history"></i>
                            Attività Recente
                        </h2>
                        <a href="/admin/activity" class="card-action">Vedi tutto →</a>
                    </div>
                    <div>
                        <div class="activity-feed-item">
                            <div class="activity-avatar">LS</div>
                            <div class="activity-content">
                                <p><strong>Liceo Scientifico</strong> ha registrato 24 nuovi studenti</p>
                                <span class="activity-time">5 minuti fa</span>
                            </div>
                        </div>
                        <div class="activity-feed-item">
                            <div class="activity-avatar">IT</div>
                            <div class="activity-content">
                                <p><strong>Istituto Tecnico</strong> ha generato 15 codici docenti</p>
                                <span class="activity-time">32 minuti fa</span>
                            </div>
                        </div>
                        <div class="activity-feed-item">
                            <div class="activity-avatar">LC</div>
                            <div class="activity-content">
                                <p><strong>Liceo Classico</strong> ha completato un backup dati</p>
                                <span class="activity-time">1 ora fa</span>
                            </div>
                        </div>
                        <div class="activity-feed-item">
                            <div class="activity-avatar">IP</div>
                            <div class="activity-content">
                                <p><strong>Istituto Professionale</strong> ha caricato 42 nuovi materiali</p>
                                <span class="activity-time">2 ore fa</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secondary Stats -->
            <div class="bento-grid quad-layout" style="margin-top: 2rem;">
                <div class="stat-card">
                    <div class="stat-value">2,847</div>
                    <div class="stat-label">Totale Studenti</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +124 questo mese
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">186</div>
                    <div class="stat-label">Docenti Attivi</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +12 questo mese
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">8.4K</div>
                    <div class="stat-label">Materiali Caricati</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +340 questa settimana
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">12.3K</div>
                    <div class="stat-label">Messaggi Inviati</div>
                    <div class="stat-change positive">
                        <i class="fas fa-fire"></i> +18% engagement
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav">
        <a href="/admin/dashboard" class="mobile-nav-item active">
            <i class="fas fa-tachometer-alt"></i>
            <span>Dashboard</span>
        </a>
        <a href="/admin/scuole" class="mobile-nav-item">
            <i class="fas fa-school"></i>
            <span>Scuole</span>
        </a>
        <a href="/admin/users" class="mobile-nav-item">
            <i class="fas fa-users"></i>
            <span>Utenti</span>
        </a>
        <a href="/admin/reports" class="mobile-nav-item">
            <i class="fas fa-chart-bar"></i>
            <span>Report</span>
        </a>
        <a href="/admin/settings" class="mobile-nav-item">
            <i class="fas fa-cog"></i>
            <span>Impostazioni</span>
        </a>
    </nav>

    <script>
        // Sidebar Toggle
        const sidebar = document.getElementById('sidebar');
        const dashboardContainer = document.getElementById('dashboardContainer');
        const sidebarToggle = document.getElementById('sidebarToggle');

        sidebarToggle.addEventListener('click', () => {
            dashboardContainer.classList.toggle('sidebar-collapsed');
        });
    </script>
</body>
</html>
