<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Docente - SKAJLA</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="/static/css/dashboard-unified.css" rel="stylesheet">
</head>
<body>
    <div class="dashboard-layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="/" class="sidebar-logo">SKAJLA</a>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-label">Menu</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="/dashboard" class="active">
                                <i class="fas fa-home"></i>
                                Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/registro-professore">
                                <i class="fas fa-book"></i>
                                Registro
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/calendario">
                                <i class="fas fa-calendar"></i>
                                Calendario
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-label">Strumenti</div>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="/chat">
                                <i class="fas fa-comments"></i>
                                Messaggi
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/materiali">
                                <i class="fas fa-folder"></i>
                                Materiali
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/bi/dashboard">
                                <i class="fas fa-chart-line"></i>
                                Analytics
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-card">
                    <div class="user-avatar">{{ user.nome[0]|upper if user and user.nome else 'P' }}{{ user.cognome[0]|upper if user and user.cognome else 'R' }}</div>
                    <div class="user-info">
                        <div class="user-name">{{ user.nome }} {{ user.cognome }}</div>
                        <div class="user-role">Docente</div>
                    </div>
                </div>
                <a href="/logout" class="btn-logout">
                    <i class="fas fa-sign-out-alt"></i>
                    Esci
                </a>
            </div>
        </aside>
        
        <main class="main-content">
            <div class="page-header">
                <div class="page-header-top">
                    <div>
                        <h1 class="page-title">Benvenuto, Prof. {{ user.cognome }}</h1>
                        <p class="page-subtitle">Gestisci le tue classi</p>
                    </div>
                    <div class="header-actions">
                        <a href="/registro-professore" class="btn btn-primary">
                            <i class="fas fa-user-check"></i>
                            Appello
                        </a>
                        <a href="/registro-professore" class="btn btn-secondary">
                            <i class="fas fa-star"></i>
                            Inserisci Voto
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Studenti</div>
                    <div class="stat-value">{{ total_studenti if total_studenti else '24' }}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Media Voti</div>
                    <div class="stat-value success">{{ media_classe if media_classe else '7.8' }}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Presenze</div>
                    <div class="stat-value accent">{{ tasso_presenze if tasso_presenze else '92' }}%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Classi</div>
                    <div class="stat-value">{{ num_classi if num_classi else '3' }}</div>
                </div>
            </div>
            
            <div class="content-grid">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Orario di Oggi</h3>
                        <a href="/calendario" class="card-action">Vedi settimana</a>
                    </div>
                    <div class="card-body">
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <div style="display: flex; align-items: center; gap: 16px; padding: 16px; background: rgba(37, 99, 235, 0.05); border-radius: 8px; border-left: 3px solid var(--accent);">
                                <div style="min-width: 80px;">
                                    <div style="font-size: 0.875rem; font-weight: 600; color: var(--accent);">09:00</div>
                                    <div style="font-size: 0.75rem; color: var(--text-muted);">11:00</div>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">Matematica - 3A</div>
                                    <div style="font-size: 0.8125rem; color: var(--text-muted);">Aula 201</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 16px; padding: 16px; background: var(--bg-light); border-radius: 8px; border-left: 3px solid var(--border-light);">
                                <div style="min-width: 80px;">
                                    <div style="font-size: 0.875rem; font-weight: 600; color: var(--text-secondary);">11:15</div>
                                    <div style="font-size: 0.75rem; color: var(--text-muted);">13:00</div>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">Fisica - 4B</div>
                                    <div style="font-size: 0.8125rem; color: var(--text-muted);">Laboratorio</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 16px; padding: 16px; background: var(--bg-light); border-radius: 8px; border-left: 3px solid var(--border-light);">
                                <div style="min-width: 80px;">
                                    <div style="font-size: 0.875rem; font-weight: 600; color: var(--text-secondary);">14:30</div>
                                    <div style="font-size: 0.75rem; color: var(--text-muted);">16:00</div>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">Matematica - 5C</div>
                                    <div style="font-size: 0.8125rem; color: var(--text-muted);">Aula 105</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Distribuzione Voti - 3A</h3>
                        <a href="/bi/dashboard" class="card-action">Analytics</a>
                    </div>
                    <div class="card-body">
                        <div style="display: flex; flex-direction: column; gap: 16px;">
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="font-size: 0.875rem; color: var(--text-secondary);">Eccellenti (9-10)</span>
                                    <span style="font-size: 0.875rem; font-weight: 600; color: var(--success);">6 studenti</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill success" style="width: 25%;"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="font-size: 0.875rem; color: var(--text-secondary);">Buoni (7-8)</span>
                                    <span style="font-size: 0.875rem; font-weight: 600; color: var(--accent);">12 studenti</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill accent" style="width: 50%;"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="font-size: 0.875rem; color: var(--text-secondary);">Sufficienti (6)</span>
                                    <span style="font-size: 0.875rem; font-weight: 600; color: var(--warning);">6 studenti</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill warning" style="width: 25%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="content-grid cols-3">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Messaggi Recenti</h3>
                        <a href="/chat" class="card-action">Vedi tutti</a>
                    </div>
                    <div class="card-body">
                        <div class="list-item">
                            <div class="list-avatar">MR</div>
                            <div class="list-content">
                                <div class="list-title">Mario Rossi</div>
                                <div class="list-subtitle">Ho una domanda sull'esercizio 5...</div>
                            </div>
                            <div class="list-meta">
                                <span style="font-size: 0.75rem; color: var(--text-light);">10 min fa</span>
                            </div>
                        </div>
                        <div class="list-item">
                            <div class="list-avatar">LB</div>
                            <div class="list-content">
                                <div class="list-title">Laura Bianchi</div>
                                <div class="list-subtitle">Grazie per la spiegazione!</div>
                            </div>
                            <div class="list-meta">
                                <span style="font-size: 0.75rem; color: var(--text-light);">1 ora fa</span>
                            </div>
                        </div>
                        <div class="list-item">
                            <div class="list-avatar">GV</div>
                            <div class="list-content">
                                <div class="list-title">Giuseppe Verdi</div>
                                <div class="list-subtitle">Posso recuperare la verifica?</div>
                            </div>
                            <div class="list-meta">
                                <span style="font-size: 0.75rem; color: var(--text-light);">2 ore fa</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Da Valutare</h3>
                        <a href="/registro-professore" class="card-action">Vai al registro</a>
                    </div>
                    <div class="card-body">
                        <div class="list-item">
                            <div class="list-content">
                                <div class="list-title">Compito in Classe - Algebra</div>
                                <div class="list-subtitle">Classe 3A - 24 studenti</div>
                            </div>
                            <span class="badge badge-warning">Urgente</span>
                        </div>
                        <div class="list-item">
                            <div class="list-content">
                                <div class="list-title">Progetto Fisica</div>
                                <div class="list-subtitle">Classe 4B - 8 progetti</div>
                            </div>
                            <span class="badge badge-neutral">In corso</span>
                        </div>
                        <div class="list-item">
                            <div class="list-content">
                                <div class="list-title">Quiz Online - Derivate</div>
                                <div class="list-subtitle">Classe 5C - 15 completati</div>
                            </div>
                            <span class="badge badge-success">Pronto</span>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Prossimi Eventi</h3>
                        <a href="/calendario" class="card-action">Calendario</a>
                    </div>
                    <div class="card-body">
                        <div class="list-item">
                            <div style="text-align: center; min-width: 48px; padding: 8px; background: var(--bg-light); border-radius: 8px;">
                                <div style="font-size: 1.25rem; font-weight: 700; color: var(--accent);">25</div>
                                <div style="font-size: 0.625rem; color: var(--text-muted); text-transform: uppercase;">Nov</div>
                            </div>
                            <div class="list-content">
                                <div class="list-title">Verifica Scritta - 3A</div>
                                <div class="list-subtitle">09:00 - 11:00 - Aula 201</div>
                            </div>
                        </div>
                        <div class="list-item">
                            <div style="text-align: center; min-width: 48px; padding: 8px; background: var(--bg-light); border-radius: 8px;">
                                <div style="font-size: 1.25rem; font-weight: 700; color: var(--accent);">27</div>
                                <div style="font-size: 0.625rem; color: var(--text-muted); text-transform: uppercase;">Nov</div>
                            </div>
                            <div class="list-content">
                                <div class="list-title">Consiglio di Classe</div>
                                <div class="list-subtitle">15:00 - 17:00 - Sala Riunioni</div>
                            </div>
                        </div>
                        <div class="list-item">
                            <div style="text-align: center; min-width: 48px; padding: 8px; background: var(--bg-light); border-radius: 8px;">
                                <div style="font-size: 1.25rem; font-weight: 700; color: var(--accent);">29</div>
                                <div style="font-size: 0.625rem; color: var(--text-muted); text-transform: uppercase;">Nov</div>
                            </div>
                            <div class="list-content">
                                <div class="list-title">Colloqui Genitori</div>
                                <div class="list-subtitle">14:00 - 18:00</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>
