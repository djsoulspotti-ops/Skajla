<!DOCTYPE html>
<html lang="it">
{% include 'partials/head.html' %}

<body>
    {% include 'partials/navbar.html' %}
    
    <div class="app-container">
        {% if user and user.ruolo in ['studente', 'professore', 'dirigente', 'admin'] %}
        {% include 'partials/sidebar.html' %}
        {% endif %}
        
        <main class="main-content">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        <i class="fas fa-info-circle"></i>
                        {{ message }}
                    </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            {% block content %}{% endblock %}
        </main>
    </div>
    
    {% include 'partials/footer.html' %}
    
    {% block scripts %}{% endblock %}
</body>
</html>

<style>
* {
    box-sizing: border-box;
}

body {
    margin: 0;
    padding: 0;
    font-family: var(--font-family-base);
    background: var(--color-background);
    color: var(--color-text);
    position: relative;
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-image: url('/static/images/skajla-background.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
    opacity: 0.15;
    pointer-events: none;
    z-index: 0;
}

.app-container {
    display: flex;
    min-height: calc(100vh - 70px);
}

.main-content {
    flex: 1;
    padding: var(--spacing-8);
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
}

.alert {
    padding: var(--spacing-4) var(--spacing-5);
    border-radius: var(--radius-md);
    margin-bottom: var(--spacing-6);
    display: flex;
    align-items: center;
    gap: var(--spacing-3);
    animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
    from {
        transform: translateY(-20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.alert-success {
    background: var(--color-semantic-success-light);
    color: var(--color-semantic-success-dark);
    border-left: 4px solid var(--color-semantic-success);
}

.alert-info {
    background: var(--color-semantic-info-light);
    color: var(--color-semantic-info-dark);
    border-left: 4px solid var(--color-semantic-info);
}

.alert-warning {
    background: var(--color-semantic-warning-light);
    color: var(--color-semantic-warning-dark);
    border-left: 4px solid var(--color-semantic-warning);
}

.alert-danger, .alert-error {
    background: var(--color-semantic-error-light);
    color: var(--color-semantic-error-dark);
    border-left: 4px solid var(--color-semantic-error);
}

@media (max-width: 768px) {
    .app-container {
        flex-direction: column;
    }
    
    .sidebar {
        width: 100%;
        height: auto;
        position: static;
    }
    
    .main-content {
        padding: var(--spacing-4);
    }
}
</style>
